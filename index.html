<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RunStats - EPS Vauban</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>

  <header>
    <h1>RunStats</h1>
  </header>

  <main id="studentInput">
    <section class="input-duo">
      <div class="eleve">
        <h2>Élève 1</h2>
        <input type="text" id="nom1" placeholder="Nom" required />
        <input type="text" id="prenom1" placeholder="Prénom" required />
        <input type="text" id="classe1" placeholder="Classe" required />
      </div>

      <div class="eleve">
        <h2>Élève 2</h2>
        <input type="text" id="nom2" placeholder="Nom" required />
        <input type="text" id="prenom2" placeholder="Prénom" required />
        <input type="text" id="classe2" placeholder="Classe" required />
      </div>
    </section>

    <section class="input-groupe">
      <input type="number" id="duree" placeholder="Durée (min)" min="0.1" step="0.1" required />
      <input type="number" id="distanceTour" placeholder="Distance d’un tour (m)" min="1" required />
      <input type="number" id="vmaRef" placeholder="VMA de référence (km/h) (optionnel)" min="0" step="0.1" />
    </section>

    <section id="chrono">
      <p id="chronoDisplay">00:00</p>
      <div class="chrono-btns">
        <button id="startBtn" class="btn-start">Démarrer</button>
        <button id="lapBtn" class="btn-lap" disabled>Ajouter 1 tour</button>
        <button id="resetBtn" class="btn-reset" disabled>Reset</button>
      </div>
      <p>Tours : <span id="lapsCount">0</span></p>
    </section>

    <section id="statsBox">
      <div class="stat ligne-bleue">Distance totale : <span id="distanceTotal">0</span> m</div>
      <div class="stat ligne-verte">Distance (km) : <span id="distanceKm">0.00</span> km</div>
      <div class="stat ligne-jaune">Vitesse moyenne : <span id="vitesseMoy">0.00</span> km/h</div>
      <div class="stat ligne-violette">VMA estimée : <span id="vmaReal">0.00</span> km/h</div>
    </section>

    <section id="etatForme" style="display: none;">
      <p>Comment te sens-tu ?</p>
      <button class="etatBtn" data-etat="Très bien">💪 Très bien</button>
      <button class="etatBtn" data-etat="Moyen">😐 Moyen</button>
      <button class="etatBtn" data-etat="Fatigué">😫 Fatigué</button>
    </section>

    <section id="qrContainer" style="display: none;">
      <h3>QR Code à scanner</h3>
      <div id="qrCodeBox"></div>
    </section>
  </main>

  <main id="profDashboard" style="display: none;">
    <h2>Espace Professeur</h2>

    <div id="qr-scan-container">
      <div id="qr-reader" style="width: 320px; margin: 0 auto;"></div>
      <button id="stopScanBtn">Arrêter le scan</button>
    </div>

    <button id="exportCsvBtn">Exporter CSV</button>
    <button id="generateGroupsBtn">Créer Groupes</button>
    <div id="groupsDisplay"></div>

    <table>
      <thead>
        <tr>
          <th>Groupe</th>
          <th>Élève</th>
          <th>Prénom</th>
          <th>Classe</th>
          <th>Durée</th>
          <th>Distance (m)</th>
          <th>Vitesse (km/h)</th>
          <th>VMA (km/h)</th>
          <th>État</th>
        </tr>
      </thead>
      <tbody id="resultsBody"></tbody>
    </table>
  </main>

  <section id="profAccess">
    <input type="password" id="profPinInput" placeholder="Code Prof" />
    <button id="profPinSubmit">Entrer</button>
    <button id="logoutBtn" style="display:none;">Déconnexion</button>
  </section>

  <footer id="footer">
    <p>RunStats - EPS Lycée Vauban</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
