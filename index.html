<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RunStats</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>🏃‍♂️ RunStats</h1>

    <!-- Saisie données élève -->
    <div class="form-line">
      <input type="text" id="nom" placeholder="Nom">
      <input type="text" id="prenom" placeholder="Prénom">
      <input type="text" id="classe" placeholder="Classe">
    </div>
    <div class="form-line">
      <input type="number" id="duree" placeholder="Durée (min)">
      <input type="number" id="longueurTour" placeholder="Longueur du tour (m)">
    </div>
    <div class="form-line">
      <input type="number" id="vmaRef" placeholder="VMA de référence (optionnelle)">
    </div>
    <button onclick="demarrerCourse()">🎬 Démarrer</button>

    <!-- Section course -->
    <div id="courseSection" style="display:none;">
      <h2 id="chrono">00:00</h2>
      <button id="boutonTour" onclick="compterTour()">➕ Tour</button>
      <button onclick="resetCourse()">🔄 Reset</button>
      <div id="infosCourse"></div>
    </div>

    <!-- Résultat final -->
    <div id="resultats" style="display:none;">
      <h2>📋 Résultats</h2>
      <div id="resumeCourse"></div>
      <p>État ressenti :</p>
      <div class="emojis">
        <button onclick="setEtat('😀')">😀 Bien</button>
        <button onclick="setEtat('😐')">😐 Bof</button>
        <button onclick="setEtat('🤢')">🤢 Mal</button>
      </div>
      <div id="qrContainer"></div>
    </div>

    <!-- SECTION PROF -->
    <div id="profLogin" style="margin-top: 50px;">
      <h2>🔐 Accès Professeur</h2>
      <input type="password" id="inputProfPIN" maxlength="4" placeholder="Code PIN (4 chiffres)">
      <button onclick="checkProfPIN()">Se connecter</button>
    </div>

    <div id="profDashboard" style="display:none;">
      <h2>📊 Résultats des élèves</h2>
      <button onclick="startQRScanner()">📷 Scanner un QR Code</button>
      <button onclick="exportCSV()">💾 Exporter les données (CSV)</button>
      <button onclick="resetProfData()">🗑️ Réinitialiser</button>
      <table id="profResultsTable"></table>

      <h3>🔁 Changer le code PIN</h3>
      <input type="password" id="inputNewPIN" maxlength="4" placeholder="Nouveau code PIN">
      <button onclick="changeProfPIN()">Modifier le code PIN</button>
    </div>

    <footer>RunStats — Équipe EPS Lycée Vauban — JB</footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
