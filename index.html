<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RunStats – Lycée Vauban</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>

  <header>
    <h1>RunStats</h1>
    <h2>Équipe EPS Lycée Vauban - JB</h2>
  </header>

  <main id="studentZone">
    <div class="input-group">
      <h3>Élève</h3>
      <input type="text" id="nom" placeholder="Nom">
      <input type="text" id="prenom" placeholder="Prénom">
      <input type="text" id="classe" placeholder="Classe">
      <input type="number" id="duree" placeholder="Durée (min)">
      <input type="number" id="distanceTour" placeholder="Distance d’un tour (m)">
      <input type="number" id="vmaRef" placeholder="VMA (optionnelle)">
    </div>

    <div id="chrono">
      <p id="chronoDisplay">00:00</p>
      <button id="startBtn">Démarrer</button>
      <button id="lapBtn" disabled>Ajouter 1 tour</button>
      <button id="resetBtn" disabled>Reset</button>
      <p>Tours : <span id="lapsCount">0</span></p>
    </div>

    <div id="stats">
      <p>Distance totale : <span id="distanceTotal">0</span> m</p>
      <p>Distance (km) : <span id="distanceKm">0.00</span> km</p>
      <p>Vitesse moyenne : <span id="vitesseMoy">0.00</span> km/h</p>
      <p>VMA estimée : <span id="vmaReal">0.00</span> km/h</p>
    </div>

    <div id="etatForme" style="display: none;">
      <p>Comment te sens-tu ?</p>
      <button class="etatBtn" data-etat="Très bien">💪</button>
      <button class="etatBtn" data-etat="Moyen">😐</button>
      <button class="etatBtn" data-etat="Fatigué">😫</button>
    </div>

    <div id="qrContainer" style="display: none;">
      <h3>QR Code à présenter au professeur</h3>
      <div id="qrCodeBox"></div>
    </div>
  </main>

  <main id="profDashboard" style="display: none;">
    <h2>Espace Professeur</h2>
    <div id="qr-reader" style="width: 300px; margin: auto;"></div>
    <button id="stopScanBtn">Arrêter le scan</button>
    <button id="exportCsvBtn">Exporter en CSV</button>

    <table>
      <thead>
        <tr>
          <th>Nom</th>
          <th>Prénom</th>
          <th>Classe</th>
          <th>Durée</th>
          <th>Distance</th>
          <th>Vitesse</th>
          <th>VMA</th>
          <th>État</th>
        </tr>
      </thead>
      <tbody id="resultsBody"></tbody>
    </table>
  </main>

  <div id="profAccess">
    <input type="password" id="profPinInput" placeholder="Code Prof" />
    <button id="profPinSubmit">Entrer</button>
  </div>

  <footer>
    RunStats – Équipe EPS Lycée Vauban - JB
  </footer>

  <script src="script.js"></script>
</body>
</html>
