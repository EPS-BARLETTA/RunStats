<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RunStats - Suivi de course</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/html5-qrcode@2.3.7/minified/html5-qrcode.min.js"></script>
</head>
<body>
  <h1>RunStats - Suivi de course</h1>

  <!-- Saisie élève -->
  <div id="studentInput">
    <div class="form-row">
      <input type="text" id="nom" placeholder="Nom" />
      <input type="text" id="prenom" placeholder="Prénom" />
      <input type="text" id="classe" placeholder="Classe" />
    </div>
    <div class="form-row">
      <input type="number" id="duree" placeholder="Durée course (min)" min="1" />
      <input type="number" id="distanceTour" placeholder="Distance tour (mètres)" min="1" />
      <input type="number" id="vmaRef" placeholder="VMA de référence (km/h)" step="0.1" min="0" />
    </div>

    <div class="centered">
      <button id="startBtn">Start</button>
      <button id="lapBtn" disabled>Tour</button>
      <button id="resetBtn">Reset</button>
    </div>

    <div id="chronoDisplay">00:00</div>

    <div id="stats">
      <p>Tours réalisés : <span id="lapsCount">0</span></p>
      <p>Distance totale (m) : <span id="distanceTotal">0</span></p>
      <p>Distance totale (km) : <span id="distanceKm">0.00</span></p>
      <p>Vitesse moyenne (km/h) : <span id="vitesseMoy">0.00</span></p>
      <p>VMA réalisée (km/h) : <span id="vmaReal">0.00</span></p>
    </div>

    <div id="etatForme" style="display:none;">
      <p>État après la course :</p>
      <button data-etat="Bien" class="etatBtn">😀</button>
      <button data-etat="Bof" class="etatBtn">😐</button>
      <button data-etat="Mal" class="etatBtn">🤮</button>
    </div>

    <div id="footer">RunStats - équipe EPS lycée Vauban - JB</div>
  </div>

  <!-- Mode Prof -->
  <div id="profDashboard" style="display:none;">
    <h2>Mode Professeur 🔐</h2>
    <label for="profPinInput">Code PIN :</label>
    <input type="password" id="profPinInput" maxlength="4" />
    <button id="profPinSubmit">Valider</button>
    <button id="changePinBtn" style="display:none;">Changer code PIN</button>

    <div id="qr-scan-container" style="margin-top:20px; display:none;">
      <div id="qr-reader" style="width: 300px; height: 300px; margin: 0 auto;"></div>
      <button id="stopScanBtn" style="margin-top:10px;">Arrêter le scan</button>
    </div>

    <h3>Résultats scannés :</h3>
    <table id="resultsTable" border="1" style="margin: 10px auto; width: 100%; max-width: 700px;">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Prénom</th>
          <th>Classe</th>
          <th>Durée (min)</th>
          <th>Distance (m)</th>
          <th>Vitesse (km/h)</th>
          <th>VMA (km/h)</th>
          <th>État</th>
        </tr>
      </thead>
      <tbody id="resultsBody"></tbody>
    </table>
    <button id="exportCsvBtn" style="margin-top: 15px;">Exporter CSV</button>
  </div>

  <script src="script.js"></script>
</body>
</html>
